# Scenario-Based Response Flow Diagram

## Complete Query Processing Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         USER QUERY                               â”‚
â”‚                  "How many bugs by priority?"                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    TOOL SELECTION                                â”‚
â”‚  â€¢ Check query for content markers                               â”‚
â”‚  â€¢ Select appropriate tools (mongo_query, rag_search, etc.)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    TOOL EXECUTION                                â”‚
â”‚  â€¢ LLM calls selected tools with parameters                      â”‚
â”‚  â€¢ Tools return data (counts, lists, content, etc.)              â”‚
â”‚                                                                   â”‚
â”‚  Tool Output Example:                                            â”‚
â”‚  {                                                                â”‚
â”‚    "success": true,                                              â”‚
â”‚    "result": [                                                   â”‚
â”‚      {"priority": "High", "count": 34},                          â”‚
â”‚      {"priority": "Medium", "count": 52},                        â”‚
â”‚      {"priority": "Low", "count": 23}                            â”‚
â”‚    ]                                                             â”‚
â”‚  }                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              ğŸ¯ SCENARIO CLASSIFICATION                          â”‚
â”‚                                                                   â”‚
â”‚  Query: "How many bugs by priority?"                             â”‚
â”‚                                                                   â”‚
â”‚  Pattern Matching:                                               â”‚
â”‚  âœ… "how many" â†’ COUNT pattern                                   â”‚
â”‚  âœ… "by priority" â†’ BREAKDOWN pattern                            â”‚
â”‚                                                                   â”‚
â”‚  Priority: BREAKDOWN > COUNT                                     â”‚
â”‚                                                                   â”‚
â”‚  ğŸ¯ Detected Scenario: BREAKDOWN                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           SELECT FINALIZATION PROMPT                             â”‚
â”‚                                                                   â”‚
â”‚  FINALIZATION_PROMPTS["breakdown"]:                              â”‚
â”‚                                                                   â”‚
â”‚  """                                                             â”‚
â”‚  Based on tool outputs, present grouped data in CLEAR,           â”‚
â”‚  STRUCTURED way:                                                 â”‚
â”‚                                                                   â”‚
â”‚  1. Brief summary of total and grouping                          â”‚
â”‚  2. Top 5-7 categories with counts                               â”‚
â”‚  3. Mention remaining if truncated                               â”‚
â”‚  4. One insight about distribution                               â”‚
â”‚                                                                   â”‚
â”‚  Keep it ORGANIZED and SCANNABLE.                                â”‚
â”‚  Do NOT paste raw tool outputs.                                  â”‚
â”‚  """                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              LLM RESPONSE GENERATION                             â”‚
â”‚                                                                   â”‚
â”‚  LLM receives:                                                   â”‚
â”‚  â€¢ Original query                                                â”‚
â”‚  â€¢ Tool outputs (data)                                           â”‚
â”‚  â€¢ Scenario-specific finalization prompt                         â”‚
â”‚                                                                   â”‚
â”‚  LLM reasons and structures response accordingly                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    FINAL RESPONSE                                â”‚
â”‚                                                                   â”‚
â”‚  "Found 109 bugs grouped by priority:                            â”‚
â”‚                                                                   â”‚
â”‚  â€¢ High: 34 bugs (31%)                                           â”‚
â”‚  â€¢ Medium: 52 bugs (48%)                                         â”‚
â”‚  â€¢ Low: 23 bugs (21%)                                            â”‚
â”‚                                                                   â”‚
â”‚  Most bugs are in Medium priority category. Would you like       â”‚
â”‚  to see details on any priority level?"                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Scenario Detection Logic

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    User Query        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Pattern Matching (in priority order)                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                       â”‚
â”‚  1. COUNT patterns                                    â”‚
â”‚     ["how many", "count", "total", "number of"]      â”‚
â”‚     â†’ SCENARIO: count                                â”‚
â”‚                                                       â”‚
â”‚  2. BREAKDOWN patterns                                â”‚
â”‚     ["breakdown", "distribution", "group by",         â”‚
â”‚      "by priority", "by state"]                      â”‚
â”‚     â†’ SCENARIO: breakdown                            â”‚
â”‚                                                       â”‚
â”‚  3. COMPARISON patterns                               â”‚
â”‚     ["compare", "versus", "vs", "difference"]        â”‚
â”‚     â†’ SCENARIO: comparison                           â”‚
â”‚                                                       â”‚
â”‚  4. ANALYSIS patterns                                 â”‚
â”‚     ["analyze", "trend", "pattern", "insight"]       â”‚
â”‚     â†’ SCENARIO: analysis                             â”‚
â”‚                                                       â”‚
â”‚  5. EXPORT patterns                                   â”‚
â”‚     ["export", "download", "save", "excel"]          â”‚
â”‚     â†’ SCENARIO: export                               â”‚
â”‚                                                       â”‚
â”‚  6. SEARCH patterns                                   â”‚
â”‚     ["find", "search", "show me", "look for"]        â”‚
â”‚     â†’ Check for DETAIL sub-patterns                  â”‚
â”‚        ["about", "detail", "information on"]         â”‚
â”‚        â†’ SCENARIO: detail OR search                  â”‚
â”‚                                                       â”‚
â”‚  7. LIST patterns                                     â”‚
â”‚     ["list", "show all", "display", "what are"]      â”‚
â”‚     â†’ SCENARIO: list                                 â”‚
â”‚                                                       â”‚
â”‚  8. DEFAULT                                           â”‚
â”‚     â†’ SCENARIO: search                               â”‚
â”‚                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Response Structure by Scenario

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  SCENARIO   â”‚  RESPONSE STRUCTURE                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚             â”‚                                                   â”‚
â”‚  COUNT      â”‚  1. Direct numeric answer                        â”‚
â”‚             â”‚  2. Brief context (1 sentence)                   â”‚
â”‚             â”‚  3. Offer to show details                        â”‚
â”‚             â”‚                                                   â”‚
â”‚             â”‚  Example:                                         â”‚
â”‚             â”‚  "There are 47 bugs. Would you like them         â”‚
â”‚             â”‚   broken down by priority?"                      â”‚
â”‚             â”‚                                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚             â”‚                                                   â”‚
â”‚  BREAKDOWN  â”‚  1. Total + grouping dimension                   â”‚
â”‚             â”‚  2. Top categories with counts & %               â”‚
â”‚             â”‚  3. Remaining count if truncated                 â”‚
â”‚             â”‚  4. One insight about distribution               â”‚
â”‚             â”‚                                                   â”‚
â”‚             â”‚  Example:                                         â”‚
â”‚             â”‚  "109 bugs by priority:                          â”‚
â”‚             â”‚   â€¢ High: 34 (31%)                               â”‚
â”‚             â”‚   â€¢ Medium: 52 (48%)                             â”‚
â”‚             â”‚   Most bugs are Medium priority."                â”‚
â”‚             â”‚                                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚             â”‚                                                   â”‚
â”‚  LIST       â”‚  1. Count found                                  â”‚
â”‚             â”‚  2. Items (10-15 max) with key fields            â”‚
â”‚             â”‚  3. Truncation note if needed                    â”‚
â”‚             â”‚  4. Offer to show more                           â”‚
â”‚             â”‚                                                   â”‚
â”‚             â”‚  Example:                                         â”‚
â”‚             â”‚  "Found 8 projects:                              â”‚
â”‚             â”‚   â€¢ Alpha: Active, Lead: John, 45 items          â”‚
â”‚             â”‚   â€¢ Beta: Active, Lead: Jane, 32 items           â”‚
â”‚             â”‚   ..."                                           â”‚
â”‚             â”‚                                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚             â”‚                                                   â”‚
â”‚  DETAIL     â”‚  1. Item name & type                             â”‚
â”‚             â”‚  2. Fields by category:                          â”‚
â”‚             â”‚     - Status & Priority                          â”‚
â”‚             â”‚     - Assignment & Ownership                     â”‚
â”‚             â”‚     - Dates & Timeline                           â”‚
â”‚             â”‚     - Related entities                           â”‚
â”‚             â”‚  3. Notable relationships                        â”‚
â”‚             â”‚                                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚             â”‚                                                   â”‚
â”‚  ANALYSIS   â”‚  1. Summary of data analyzed                     â”‚
â”‚             â”‚  2. Key findings (2-4 bullets)                   â”‚
â”‚             â”‚  3. Interpretation/recommendation                â”‚
â”‚             â”‚  4. Follow-up suggestions                        â”‚
â”‚             â”‚                                                   â”‚
â”‚             â”‚  Example:                                         â”‚
â”‚             â”‚  "Analysis of this month:                        â”‚
â”‚             â”‚   â€¢ 45 new bugs (+15%)                           â”‚
â”‚             â”‚   â€¢ Avg resolution: 3.2 days                     â”‚
â”‚             â”‚   â€¢ High priority in Auth module                 â”‚
â”‚             â”‚   Recommendation: Focus on Auth testing."        â”‚
â”‚             â”‚                                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚             â”‚                                                   â”‚
â”‚  COMPARISON â”‚  1. What's being compared                        â”‚
â”‚             â”‚  2. Side-by-side metrics                         â”‚
â”‚             â”‚  3. Key differences/similarities                 â”‚
â”‚             â”‚  4. Conclusion/recommendation                    â”‚
â”‚             â”‚                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Benefits Visualization

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    BEFORE                                     â”‚
â”‚                                                               â”‚
â”‚  User: "How many bugs?"                                      â”‚
â”‚                                                               â”‚
â”‚  Response:                                                    â”‚
â”‚  ğŸ¯ INTELLIGENT QUERY RESULT:                                â”‚
â”‚  Query: 'how many bugs'                                      â”‚
â”‚  ğŸ“‹ UNDERSTOOD INTENT:                                       â”‚
â”‚  â€¢ Primary Entity: workItem                                  â”‚
â”‚  â€¢ Filters: type=bug                                         â”‚
â”‚  ğŸ”§ GENERATED PIPELINE:                                      â”‚
â”‚  â€¢ $match: {"type": "bug"}                                   â”‚
â”‚  â€¢ $count: "total"                                           â”‚
â”‚  ğŸ“Š RESULTS:                                                 â”‚
â”‚  Total: 47                                                   â”‚
â”‚  [300 lines of raw data...]                                  â”‚
â”‚                                                               â”‚
â”‚  âŒ Verbose, hard to scan                                    â”‚
â”‚  âŒ Includes technical details users don't need              â”‚
â”‚  âŒ Not actionable                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                            â¬‡ï¸ TRANSFORM â¬‡ï¸

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     AFTER                                     â”‚
â”‚                                                               â”‚
â”‚  User: "How many bugs?"                                      â”‚
â”‚  ğŸ¯ Query scenario detected: COUNT                           â”‚
â”‚                                                               â”‚
â”‚  Response:                                                    â”‚
â”‚  "There are 47 bugs in the system. Would you like to        â”‚
â”‚   see them broken down by priority or project?"             â”‚
â”‚                                                               â”‚
â”‚  âœ… Concise and direct                                       â”‚
â”‚  âœ… Answers the question immediately                         â”‚
â”‚  âœ… Offers helpful next steps                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Customization Points

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CUSTOMIZATION POINT          â”‚  LOCATION IN CODE           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                               â”‚                             â”‚
â”‚  Add new scenario             â”‚  _classify_query_scenario() â”‚
â”‚                               â”‚  (agent.py ~line 340)       â”‚
â”‚                               â”‚                             â”‚
â”‚  Modify pattern matching      â”‚  _classify_query_scenario() â”‚
â”‚                               â”‚  (agent.py ~line 340)       â”‚
â”‚                               â”‚                             â”‚
â”‚  Change response structure    â”‚  FINALIZATION_PROMPTS       â”‚
â”‚                               â”‚  (agent.py ~line 384)       â”‚
â”‚                               â”‚                             â”‚
â”‚  Adjust pattern priority      â”‚  Order in                   â”‚
â”‚                               â”‚  _classify_query_scenario() â”‚
â”‚                               â”‚                             â”‚
â”‚  Add logging/monitoring       â”‚  Around scenario detection  â”‚
â”‚                               â”‚  (agent.py ~line 1156)      â”‚
â”‚                               â”‚                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

**This diagram shows the complete flow from user query to structured response!**
