<div class="main_section d-flex flex-column h-100">
    <div class="header custom-header d-flex gap-3 align-items-center">
        <div class="projectName">{{projectName}}</div>
        <div class="settingIcon">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                class="lucide lucide-settings h-3.5 w-3.5">
                <path
                    d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z">
                </path>
                <circle cx="12" cy="12" r="3"></circle>
            </svg>
            Settings
        </div>
    </div>
    <div class="content d-flex">
        <div class="settings-container">
            <div class="sidebar">
                <div class="sidebar-heading">SETTINGS</div>
                <ul class="sidebar-menu">
                    <li (click)="onTabChange('GENERAL')" [class.active]="selectedTab === 'GENERAL'">General</li>
                    <li (click)="onTabChange('MEMBERS')" [class.active]="selectedTab === 'MEMBERS'">Members</li>
                    <li (click)="onTabChange('STATES')" [class.active]="selectedTab === 'STATES'">States</li>
                    <li (click)="onTabChange('FEATURES')" [class.active]="selectedTab === 'FEATURES'">Features</li>
                    <li (click)="onTabChange('LABELS')" [class.active]="selectedTab === 'LABELS'">Labels</li>
                    <li (click)="onTabChange('ESTIMATION')" [class.active]="selectedTab === 'ESTIMATION'">Estimation</li>
                    <li (click)="onTabChange('EPIC')" [class.active]="selectedTab === 'EPIC'">Epics</li>
                    <!-- <li (click)="onTabChange('WORK_ITEM_TYPE')" [class.active]="selectedTab === 'WORK_ITEM_TYPE'">Work Item Type</li>
                    <li (click)="onTabChange('TEMPLATES')" [class.active]="selectedTab === 'TEMPLATES'">Templates</li> -->
                </ul>
            </div>

            <!-- GENERAL -->
            <ng-container *ngIf="selectedTab == 'GENERAL'">
                <div class="main-content">
                    <div class="banner-image"
                        [style.backgroundImage]="'url(' + imagePreview + ')'">
                        <div class="content">
                            <div class="left-section">
                                <div class="icon-btn d-flex align-items-center">
                                    <button class="emoji-btn d-flex align-items-center justify-content-center" (click)="toggleEmojiPicker()">
                                        <span *ngIf="selectedEmoji; else defaultIcon" class="selected-emoji">{{ selectedEmoji }}</span>
                                        <ng-template #defaultIcon>
                                            <img class="w-100" src="https://d2z9497xp8xb12.cloudfront.net/prod-images/662267c17558553178131023656.png"
                                                alt="">
                                        </ng-template>
                                    </button>
                                </div>
                                <div class="project-title">
                                    <p class="label_title">{{projectName}}</p>
                                    <div class="project-inf">
                                        <p class="label">{{projectData?.projectDisplayId}}</p>
                                        <p class="label">{{accessType}}</p>
                                    </div>
                                </div>
                            </div>
                            <div *ngIf="showEmojiPicker" class="emoji-picker-container">
                                <emoji-mart (emojiSelect)="addEmoji($event)"></emoji-mart>
                            </div>

                            <div class="right-section">
                                <label for="fileUpload" class="change-cover-btn">Change Cover</label>
                                <input type="file" id="fileUpload" (change)="updatePostImage($event)" hidden>
                            </div>
                        </div>
                        <div *ngIf="imgLoader" class="loader-overlay">
                            <div class="spinner"></div>
                        </div>
                    </div>


                    <div class="fields-section p-name">
                        <div class="field">
                            <div class="label">Project name</div>
                            <mat-form-field appearance="outline" color="accent">
                                <input style="font-size: 14px; font-weight: 600;" matInput name="projectName"
                                    placeholder="Project name" required [(ngModel)]="projectName"
                                    #projectNameCtrl="ngModel" (input)="onInput()" />

                            </mat-form-field>
                        </div>
                        <div class="field">
                            <div class="label">Project ID</div>
                            <mat-form-field appearance="outline" color="accent">
                                <input style="font-size: 14px; font-weight: 600;" matInput name="projectDisplayId"
                                    placeholder="Project ID" required [(ngModel)]="projectDisplayId"
                                    #projectIdCtrl="ngModel" (input)="onInput()" />

                            </mat-form-field>
                        </div>

                    </div>
                    <div class="text-field">
                        <div class="">Description</div>
                        <textarea class="custom-textarea" matInput placeholder="Enter project description"
                            style="font-size: 14px;  font-weight: 600;" [(ngModel)]="projectDescription"></textarea>
                    </div>

                    <div class=" timeZone d-flex flex-column ">
                        <div class="field d-flex gap-5 align-items-center ">
                            <div class="project-status w-100">
                                <div class="field">
                                    <div class="label">Project Status</div>
                                    <mat-form-field appearance="outline">
                                        <mat-select name="projectStatus" placeholder="Select Project Status"
                                            [(ngModel)]="projectStatus" (selectionChange)="onStatusChange($event)">
                                            <mat-option *ngFor="let status of projectStatusOptions"
                                                [value]="status.value">
                                                <span class="status-icon" [ngClass]="status.value.toLowerCase()"></span>
                                                {{status.label}}
                                            </mat-option>
                                        </mat-select>
                                    </mat-form-field>
                                </div>
                            </div>
                            <div class="projectAccessType">
                                <div class="form-row" style="display: flex; gap: 16px;">
                                    <div class="form-field" style="flex: 1;">
                                        <label>Access Type</label>
                                        <div class="access-type-group">
                                            <div class="access-type-option" [class.selected]="accessType === 'PUBLIC'"
                                                (click)="accessType = 'PUBLIC'">
                                                Public
                                            </div>
                                            <div class="access-type-option" [class.selected]="accessType === 'PRIVATE'"
                                                (click)="accessType = 'PRIVATE'">
                                                Private
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>

                    <!-- <div class="fields-section timeZone">
                        <div class="field">
                            <div class="label">Project Timezone</div> <mat-form-field appearance="outline"
                                color="accent">
                                <mat-select style="font-size: 14px;" placeholder="Select Timezone" name="timezone"
                                    required [(ngModel)]="projectTimezone" #timezoneCtrl="ngModel">
                                    <mat-option value="" disabled>Project Timezone</mat-option>
                                    <mat-option value="UTC">UTC</mat-option>
                                    <mat-option value="UNIVERSAL">Universal</mat-option>
                                </mat-select>

                            </mat-form-field>
                        </div>

                    </div> -->
                    <div class="button-section mt-3">
                        <div class="update-btn cursor-pointer" [class.disabled]="isUpdatingProject"
                            (click)="!isUpdatingProject && updateProject()">
                            <span *ngIf="isUpdatingProject" class="spinner-border spinner-border-sm me-2"></span>
                            {{ isUpdatingProject ? 'Updating...' : 'Update Project' }}
                        </div>
                        <div class="created-date">Created on {{ projectData?.createdTimeStamp | date:'MMM d y, h:mm a' }}</div>
                    </div>

                </div>
            </ng-container>


            <!-- MEMBERS -->
            <ng-container *ngIf="selectedTab == 'MEMBERS'">
                <div class="main-content defaults ">
                    <div class="members-page h-100 d-flex flex-column">
                        <div class="section top-section">
                            <h2>Defaults</h2>
                            <div class="divider"></div>
                            <div class="fields-section">
                                <div class="field">
                                    <div class="label">Project lead</div>
                                    <mat-form-field appearance="outline" color="accent">
                                        <mat-select style="font-size: 14px;"
                                            [placeholder]="projectLead ? projectLead.name : 'Select project lead'"
                                            name="bloodGroup" required [(ngModel)]="projectLead"
                                            (selectionChange)="updateProjectLead(projectLead)"
                                            #bloodGroupCtrl="ngModel">
                                            <mat-option *ngFor="let item of membersList" [value]="item">
                                                {{ item.name }}
                                            </mat-option>
                                        </mat-select>

                                    </mat-form-field>
                                </div>

                                <div class="field">
                                    <div class="label">Default assignee</div>
                                    <mat-form-field appearance="outline" color="accent">
                                        <mat-select style="font-size: 14px;"
                                            [placeholder]="projectDefaulteAssignee ? projectDefaulteAssignee.name : 'Select default assignee'"
                                            name="bloodGroup" required [(ngModel)]="projectDefaulteAssignee"
                                            (selectionChange)="updateDefaultAssignee(projectDefaulteAssignee)"
                                            #bloodGroupCtrl="ngModel">
                                            <mat-option *ngFor="let group of membersList" [value]="group">
                                                {{ group.name }}
                                            </mat-option>
                                        </mat-select>

                                    </mat-form-field>
                                </div>

                            </div>
                        </div>
                        <!-- 
                        <div class="grant-section">
                            <div class="permission-info">
                                <label class="access-label">Grant view access to all work items for guest users:</label>
                                <p>This will allow guests to have view access to all the project work items.</p>
                            </div>
                            <mat-slide-toggle></mat-slide-toggle>
                        </div> -->

                        <div class="section bottom-section">

                            <div class="search-section">
                                <h2>Members</h2>
                                <div class="fields-sections search-filed">
                                    <div class="right-btns">
                                        <div class="single_field">
                                            <mat-form-field appearance="outline" color="accent">
                                                <input style="font-size: 14px;" matInput name="username"
                                                    placeholder="Search" required [(ngModel)]="membersSearchText"
                                                    #vendorCtrl="ngModel" (input)="onMemberSearch(membersSearchText)" />
                                            </mat-form-field>
                                        </div>
                                        <button type="button" class="add-btn" (click)="openModal()">
                                            Add Member
                                        </button>
                                        <div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog"
                                            aria-labelledby="exampleModalCenterTitle" aria-hidden="true"
                                            style="z-index: 200 !important;">
                                            <div class="modal-dialog modal-dialog-centered auto-width-modal"
                                                role="document">
                                                <div class="modal-content invite-modal">
                                                    <div class="modal-header">
                                                        <h4 class="modal-title">Invite members</h4>
                                                        <div (click)="openNewMembeDialog()" class="new_member">+ New
                                                            member</div>
                                                    </div>
                                                    <div class="modal-body">
                                                        <div class="invite-description">
                                                            <span class="blue-highlight">Invite members to work on your
                                                                project.</span>
                                                        </div>
                                                        <div class="invite-row"
                                                            *ngFor="let invite of inviteList; let i = index">
                                                            <div class="select-wrapper role-wrapper">
                                                                <mat-form-field appearance="outline">
                                                                    <mat-select [(ngModel)]="invite.coWorker"
                                                                        [placeholder]="'Select Member'">
                                                                        <mat-option
                                                                            *ngFor="let member of getAvailableMembers(invite)"
                                                                            [value]="member">
                                                                            {{ member.name }}
                                                                        </mat-option>
                                                                    </mat-select>
                                                                </mat-form-field>



                                                            </div>

                                                            <div class="select-wrapper role-wrapper">
                                                                <mat-form-field appearance="outline">

                                                                    <mat-select [(ngModel)]="invite.role">
                                                                        <mat-option value="GUEST">Guest</mat-option>
                                                                        <mat-option value="Member">Member</mat-option>
                                                                        <mat-option value="ADMIN">Admin</mat-option>
                                                                    </mat-select>
                                                                </mat-form-field>

                                                            </div>

                                                            <button type="button" class="remove-btn"
                                                                *ngIf="inviteList.length > 1" (click)="removeInvite(i)">
                                                                <span>&times;</span>
                                                            </button>
                                                        </div>


                                                    </div>

                                                    <div class="modal-footer justify-content-between">
                                                        <div class="add-more-section">
                                                            <button type="button" [disabled]="!canAddMore()"
                                                                class="add-more-btn" (click)="addMoreInvite()">
                                                                + Add more
                                                            </button>
                                                        </div>
                                                        <div class="buttons d-flex gap-3">
                                                            <button (click)="closeModal()" type="button"
                                                                class="btn cancel-btn"
                                                                data-dismiss="modal">Cancel</button>
                                                            <button type="button" class="btn add-member-btn"
                                                                [disabled]="isAddingMembers" (click)="addmembers()">
                                                                <span *ngIf="isAddingMembers"
                                                                    class="spinner-border spinner-border-sm me-2"></span>
                                                                {{ isAddingMembers ? 'Adding...' : 'Add member' }}
                                                            </button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>


                                    </div>


                                </div>
                            </div>


                           <div class="member-table-wrapper mt-1">
                            <table mat-table [dataSource]="membersList" class="members-table">

  <!-- Full Name -->
  <ng-container matColumnDef="fullName">
    <th mat-header-cell *matHeaderCellDef> Full name </th>
    <td mat-cell *matCellDef="let element" class="noWrap">
      <div class="avatar-circle">{{ element.name[0] }}</div>
      {{ element.name ? element.name : 'NA' }}
    </td>
  </ng-container>

  <!-- Display Name -->
  <ng-container matColumnDef="displayName">
    <th mat-header-cell *matHeaderCellDef> Display name </th>
    <td mat-cell *matCellDef="let element"> {{ element.displayName ? element.displayName : 'NA'}} </td>
  </ng-container>

  <!-- Account Type -->
  <ng-container matColumnDef="accountType">
    <th mat-header-cell *matHeaderCellDef> Account type </th>
    <td mat-cell *matCellDef="let element"> {{ element.role ? element.role : 'NA' }} </td>
  </ng-container>

  <!-- Joining Date -->
  <ng-container matColumnDef="joiningDate">
    <th mat-header-cell *matHeaderCellDef> Joining date </th>
    <td mat-cell *matCellDef="let element">
      {{ element.joiningDate ? (element.joiningDate | date : 'dd-MM-yyyy') : 'NA' }}
    </td>
  </ng-container>

  <!-- Action Column -->
  <ng-container matColumnDef="action">
    <th mat-header-cell *matHeaderCellDef> Action </th>
    <td mat-cell *matCellDef="let element">
      <button mat-icon-button color="warn" (click)="removeMember(element)">
        <mat-icon>delete</mat-icon>
      </button>
    </td>
  </ng-container>

  <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
  <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
</table>

                           </div>
                        </div>
                    </div>


                </div>
            </ng-container>


            <!-- STATES -->
            <ng-container *ngIf="selectedTab == 'STATES'">
                <div class="main-content">
                    <h2 style="font-size: 20px;">States</h2>
                    <div class="divider"></div>

                    <ng-container *ngFor=" let state of states">
                        <div class="state_card">
                            <div class="btn-row">
                                <div class="left_side" (click)="openStateCard(state)">
                                    <mat-icon>keyboard_arrow_down</mat-icon>
                                    <div class="state_text">{{state.name}}</div>
                                </div>

                                <div class="right_side">
                                    <span class="plus_icon" (click)="openCreateSubStateForm(state)">&plus;</span>
                                </div>
                            </div>

                            <ng-container *ngIf="state.isOpened">
                                <ng-container *ngIf="showingNewSubStateForm === state.id">
                                    <div class="sub_state_card new-state-form">
                                        <div class="color_row">
                                            <div class="color_box color-picker-container">
                                                <div class="color-dot" [style.background-color]="newSubStateColor"
                                                    (click)="toggleSubStateColorPicker()">
                                                </div>
                                                <div class="color-picker-dropdown" *ngIf="showSubStateColorPicker">
                                                    <div class="color-option" *ngFor="let color of labelColors"
                                                        [style.background-color]="color"
                                                        (click)="selectSubStateColor(color)">
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="fields_column gap-1">
                                                <div class="fields-section_state">
                                                    <div class="field">
                                                        <mat-form-field appearance="outline" color="accent">
                                                            <input matInput placeholder="Name" class="custom_state_input"
                                                                [(ngModel)]="newSubStateName" #nameInput>
                                                        </mat-form-field>
                                                    </div>
                                                </div>
                                                <div class="fields-section_state">
                                                    <div class="field">
                                                        <mat-form-field appearance="outline" color="accent">
                                                            <input matInput
                                                                placeholder="Describe this state for your members"
                                                                [(ngModel)]="newSubStateDescription">
                                                        </mat-form-field>
                                                    </div>
                                                </div>
                                                <div class="buttons_row">
                                                    <div class="create_btn"
                                                        [class.disabled]="isAddingSubState || !newSubStateName.trim()"
                                                        (click)="!isAddingSubState && newSubStateName.trim() && addSubState(state.id)">
                                                        <span *ngIf="isAddingSubState"
                                                            class="spinner-border spinner-border-sm me-2"></span>
                                                        {{ isAddingSubState ? 'Creating...' : 'Create' }}
                                                    </div>
                                                    <div class="cancel_btn" (click)="cancelCreateSubState()">Cancel
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </ng-container>

                                <ng-container *ngFor="let subState of state.subStates">
                                    <div class="sub_state_card">
                                        <div class="color_row w-100">
                                            <div class="color_box color-picker-container">
                                                <div class="color-dot" [style.background-color]="subState?.color"
                                                    [class.clickable]="subState?.isOpened"
                                                    (click)="subState?.isOpened && toggleEditSubStateColorPicker(subState.id)">
                                                </div>
                                                <div class="color-picker-dropdown"
                                                    *ngIf="showEditSubStateColorPicker && subState.isOpened && editingSubStateId === subState.id">
                                                    <div class="color-option" *ngFor="let color of labelColors"
                                                        [style.background-color]="color"
                                                        (click)="selectEditSubStateColor(color, subState)">
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="fields_column gap-1">
                                                <div class="fields-section_state">
                                                    <div class="field">
                                                        <mat-form-field appearance="outline" color="accent"
                                                            class="hover-form-field"
                                                            [ngClass]="{'disable-hover': subState.isOpened}">
                                                            <input style="font-size: 14px;" matInput name="subStateName"
                                                                [disabled]="!subState.isOpened" placeholder="Name"
                                                                required [(ngModel)]="subState.name"
                                                                #subStateCtrl="ngModel" (input)="onInput()" />

                                                            <div matSuffix class="action-btn">
                                                                <div class="mark-text" (click)="markDefault(subState)">
                                                                    {{subState.default ? 'Default' : 'Mark as default'}}
                                                                </div>
                                                                <div class="edit_icon"
                                                                    (click)="onEditSubState(subState)">
                                                                    <svg xmlns="http://www.w3.org/2000/svg" width="24"
                                                                        height="24" viewBox="0 0 24 24" fill="none"
                                                                        stroke="currentColor" stroke-width="2"
                                                                        stroke-linecap="round" stroke-linejoin="round"
                                                                        class="lucide lucide-pencil size-4 w-100 h-100">
                                                                        <path
                                                                            d="M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z">
                                                                        </path>
                                                                        <path d="m15 5 4 4"></path>
                                                                    </svg>
                                                                </div>
                                                                <div class="delete_icon"
                                                                    (click)="selectedSubStateForDelete(state.id, subState.id)"
                                                                    data-bs-toggle="modal"
                                                                    data-bs-target="#deleteModal_2">
                                                                    <svg xmlns="http://www.w3.org/2000/svg" width="24"
                                                                        height="24" viewBox="0 0 24 24" fill="none"
                                                                        stroke="currentColor" stroke-width="2"
                                                                        stroke-linecap="round" stroke-linejoin="round"
                                                                        class="lucide lucide-trash2 w-100 h-100">
                                                                        <path d="M3 6h18"></path>
                                                                        <path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6">
                                                                        </path>
                                                                        <path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2">
                                                                        </path>
                                                                        <line x1="10" x2="10" y1="11" y2="17"></line>
                                                                        <line x1="14" x2="14" y1="11" y2="17"></line>
                                                                    </svg>
                                                                </div>
                                                            </div>
                                                        </mat-form-field>

                                                    </div>
                                                </div>

                                                <ng-container *ngIf="subState.isOpened">
                                                    <div class="fields-section_state">
                                                        <div class="field">
                                                            <mat-form-field appearance="outline" color="accent">
                                                                <input style="font-size: 14px;" matInput
                                                                    name="subStateDescription"
                                                                    placeholder="Describe this state for your members"
                                                                    required [(ngModel)]="subState.description"
                                                                    #descriptionCtrl="ngModel" (input)="onInput()" />

                                                            </mat-form-field>
                                                        </div>
                                                    </div>
                                                    <div class="buttons_row">
                                                        <div class="updte_btn" [class.disabled]="isUpdatingSubState"
                                                            (click)="!isUpdatingSubState && onUpdateSubState(subState)">
                                                            <span *ngIf="isUpdatingSubState"
                                                                class="spinner-border spinner-border-sm me-2"></span>
                                                            {{ isUpdatingSubState ? 'Updating...' : 'Update' }}
                                                        </div>
                                                        <div (click)="onCancelSubState(subState)" class="cancel_btn">
                                                            Cancel
                                                        </div>
                                                    </div>
                                                </ng-container>


                                            </div>

                                        </div>
                                    </div>
                                </ng-container>
                            </ng-container>




                        </div>
                    </ng-container>


                </div>
                <div class="modal fade" id="deleteModal_2" tabindex="-1" aria-labelledby="deleteModalState"
                    aria-hidden="true">
                    <div class="modal-dialog modal-dialog-centered">
                        <div class="modal-content">
                            <div class="modal-header border-0">
                                <h5 class="modal-title" id="deleteModalState">
                                    <img src="https://d2z9497xp8xb12.cloudfront.net/prod-images/439988c1752592958469delete.svg"
                                        alt="">
                                    Confirm Delete
                                </h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal"
                                    aria-label="Close"></button>
                            </div>
                            <div class="modal-body text-center">
                                <div class="mb-3"></div>
                                <h6 class="mb-3">Are you sure you want to delete this SubState?</h6>
                                <p class="text-muted">This action cannot be undone. The SubState will be permanently
                                    deleted.</p>
                            </div>
                            <div class="modal-footer border-0">
                                <button type="button" class="btn btn-secondary cancel-delete-btn"
                                    data-bs-dismiss="modal">
                                    Cancel
                                </button>
                                <button type="button" (click)="deleteSubState()" class="btn btn-danger w-20"
                                    data-bs-dismiss="modal">
                                    Delete
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </ng-container>



            <!-- LABELS -->
            <ng-container *ngIf="selectedTab == 'LABELS'">
                <div class="main-content">

                    <div class="labels_section h-100">
                        <div class="title_section">
                            <div class="p-title">Labels</div>
                            <div class="label_btn" (click)="toggleAddLabel()">Add label</div>
                        </div>
                        <div class="divider"></div>

                        <div class="add-label-form" *ngIf="isAddingLabel">
                            <div class="label-input-row d-flex align-items-center">
                                <div class="color-picker-container position-relative">
                                    <div class="color-dot" [style.background-color]="selectedLabelColor"
                                        (click)="toggleColorPicker()"></div>
                                    <div class="color-picker-dropdown" *ngIf="showColorPicker">
                                        <div class="color-option" *ngFor="let color of labelColors"
                                            [style.background-color]="color" (click)="selectColor(color)"></div>
                                    </div>
                                </div>
                                <input type="text" class="label-input" placeholder="Label title"
                                    [(ngModel)]="newLabelTitle" #labelInput>
                                <div class="action-buttons">
                                    <button class="cancel-btn" (click)="cancelAddLabel()">Cancel</button>
                                    <button class="add-btn" [disabled]="isCreatingLabel || !newLabelTitle?.trim()"
                                        (click)="!isCreatingLabel && createLabelAPI()">
                                        <span *ngIf="isCreatingLabel"
                                            class="spinner-border spinner-border-sm me-2"></span>
                                        {{ isCreatingLabel ? 'Adding...' : 'Add' }}
                                    </button>
                                </div>
                            </div>
                        </div>

                        <div class="labelList d-flex flex-column gap-3"
                            *ngIf="labelsList.length > 0 ; else emptyScreen">
                            <ng-container *ngFor="let item of labelsList; let i = index">
                                <div class="label_card">

                                    <div class="edit-label-form w-100" *ngIf="editingLabelIndex === i">
                                        <div class="edit-label-row">
                                            <div class="color-picker-container position-relative">
                                                <div class="color-dot" [style.background-color]="editLabelColor"
                                                    (click)="toggleColorPicker()"></div>
                                                <div class="color-picker-dropdown" *ngIf="showColorPicker">
                                                    <div class="color-option" *ngFor="let color of labelColors"
                                                        [style.background-color]="color"
                                                        (click)="selectColorForEdit(color)"></div>
                                                </div>
                                            </div>
                                            <input type="text" class="edit-label-input" [(ngModel)]="editLabelTitle">
                                            <div class="edit-buttons">
                                                <button class="edit-cancel-btn"
                                                    (click)="cancelEditLabel()">Cancel</button>
                                                <button class="edit-update-btn cursor-pointer"
                                                    [disabled]="isUpdatingLabel"
                                                    (click)="!isUpdatingLabel && updateLabel()">
                                                    <span *ngIf="isUpdatingLabel"
                                                        class="spinner-border spinner-border-sm me-2"></span>
                                                    {{ isUpdatingLabel ? 'Updating...' : 'Update' }}
                                                </button>
                                            </div>
                                        </div>
                                    </div>

                                    <ng-container *ngIf="editingLabelIndex !== i">
                                        <div class="left_side">
                                            <div class="color_dot" [style.background-color]="item.color"></div>
                                            <div class="text">{{item.label}}</div>
                                        </div>
                                        <div class="right_side">
                                            <div class="action-btn gap-3">
                                                <div class="edit_icon" (click)="editLabel(i)">
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                                                        viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                                        stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                                                        class="lucide lucide-pencil size-4 w-100 h-100">
                                                        <path
                                                            d="M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z">
                                                        </path>
                                                        <path d="m15 5 4 4"></path>
                                                    </svg>
                                                </div>
                                                <div class="delete_icon" (click)="selectLabelForDelete(item)"
                                                    data-bs-toggle="modal" data-bs-target="#deleteModal">
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                                                        viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                                        stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                                                        class="lucide lucide-trash2 w-100 h-100">
                                                        <path d="M3 6h18"></path>
                                                        <path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"></path>
                                                        <path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"></path>
                                                        <line x1="10" x2="10" y1="11" y2="17"></line>
                                                        <line x1="14" x2="14" y1="11" y2="17"></line>
                                                    </svg>
                                                </div>
                                            </div>
                                        </div>
                                    </ng-container>
                                </div>
                            </ng-container>
                        </div>
                    </div>



                </div>
            </ng-container>

            <!-- Delete Modal for Labels -->
            <div class="modal fade" id="deleteModal" tabindex="-1" aria-labelledby="deleteModalLabel"
                aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered">
                    <div class="modal-content">
                        <div class="modal-header border-0">
                            <h5 class="modal-title" id="deleteModalLabel">
                                <img src="https://d2z9497xp8xb12.cloudfront.net/prod-images/439988c1752592958469delete.svg"
                                    alt="">
                                Confirm Delete
                            </h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body text-center">
                            <div class="mb-3"></div>
                            <h6 class="mb-3">Are you sure you want to delete this label?</h6>
                            <p class="text-muted">This action cannot be undone. The label will be permanently deleted.
                            </p>
                        </div>
                        <div class="modal-footer border-0">
                            <button type="button" class="btn btn-secondary cancel-delete-btn" data-bs-dismiss="modal">
                                Cancel
                            </button>
                            <button type="button" class="btn btn-danger w-20" (click)="deleteLabel()"
                                data-bs-dismiss="modal">
                                Delete
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <ng-container *ngIf="selectedTab == 'ESTIMATION'">
                <div class="main-content">
                    <div *ngIf="!estimateList" class="estimate-container d-flex flex-column align-items-center justify-content-center">
                        <div class="estimate-illustration mb-4">
                            <img src="../../../../../../assets/images/estimate-illustration.svg" alt="No estimates">
                        </div>
                        <h2 class="mb-3">No estimate systems yet</h2>
                        <p class="text-muted mb-4 p-1">Create a set of estimates to communicate the amount of work per work
                            item.</p>
                        <button class="add_button" (click)="addEstimation()">
                            Add estimate system
                        </button>
                    </div>
                    <div *ngIf="estimateList" class="estimation_section">
                        <div class="p-title">Estimates</div>
                        <p class="subtitle">Set up estimation systems to track and communicate the effort required for each work item.</p>
                        <div class="divider"></div>

                        <div class="estimate-toggle-row d-flex align-items-start justify-content-between">
                            <div class="toggle-left">
                                <div class="toggle-title">Enable estimates for my project</div>
                                <div class="toggle-desc text-muted">They help you in communicating complexity and workload of the team.</div>
                            </div>
                            <div class="toggle-right">
                                <div class="widget-toggle">
                                    <label class="switch">
                                        <input type="checkbox" [checked]="isEstimatesEnabled" (change)="toggleEstimates($event)">
                                        <span class="slider round"></span>
                                    </label>
                                </div>
                            </div>
                        </div>

                        <div class="divider"></div>

                        <div class="estimate-points">
                            <div class="points-header d-flex align-items-center justify-content-between">
                                <div class="estimate_leftSide d-flex align-items-center gap-3 justify-content-between">
                                    <div class="points-title">{{ estimateList?.estimateSystem}}</div>
                                    <div class="estimate_leftSide d-flex align-items-center gap-3 justify-content-between">
                                        <!-- <div class="points-title">{{ estimateList?.estimateSystem }}</div> -->
                                        <div class="points-values">{{ formatEstimates() }}</div>
                                    </div>
                                </div>
                                <div class="estimate_rightSide">
                                    <button class="points-edit" (click)="editPoints()" title="Edit">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
                                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                            <path d="M12 20h9" />
                                            <path d="M16.5 3.5a2.121 2.121 0 1 1 3 3L7 19l-4 1 1-4Z" />
                                        </svg>
                                    </button>
                                </div>
                            </div>
                        
                        </div>

                        <div class="divider"></div>
                    </div>
                </div>
            </ng-container>

            <ng-container *ngIf="selectedTab == 'FEATURES'">
                <div class="main-content">
                    <div class="features-container">
                        <div class="p-title">Projects and work items</div>
                        <p class="subtitle">Toggle these on or off this project.</p>
                        <ng-container *ngFor="let item of settings">
                            <div class="divider"></div>
                            <div class="permission_card">
                                <div class="left_side">
                                    <img src="../../../../../../assets/images/doc_icon.webp" alt="">
                                    <div class="permission_desc">
                                        <div class="header">{{item.title}}</div>
                                        <div class="description">{{item.description}}</div>
                                    </div>
                                </div>

                                <div class="right_side">


                                    <div class="widget-toggle">
                                        <label class="switch">
                                            <input type="checkbox" [checked]="item.enabled"
                                                (change)="toggleSetting(item)">
                                            <span class="slider round"></span>
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </ng-container>

                        <div class="work_manage">
                            <div class="p-title">Work management</div>
                            <p class="subtitle">Manage your work and projects with ease.</p>

                            <div class="divider"></div>
                            <div class="permission_card">
                                <div class="left_side">
                                    <img src="../../../../../../assets/images/doc_icon.webp" alt="">
                                    <div class="permission_desc">
                                        <div class="header">Time Tracking</div>
                                        <div class="description">Track time spent on work items and projects.</div>
                                    </div>
                                </div>

                                <div class="right_side">


                                    <div class="widget-toggle">
                                        <label class="switch">
                                            <input type="checkbox" [checked]="isTrackingEnabled"
                                                (change)="toggleTimeTracking($event)">
                                            <span class="slider round"></span>
                                        </label>
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>
                </div>
            </ng-container>
            <ng-container *ngIf="selectedTab == 'WORK_ITEM_TYPE'">
                <div class="main-content">
                    <div *ngIf="!enableWorkitemType" class="work-item-type-container d-flex flex-column align-items-center justify-content-center w-100">
                        <div class="work-item-illustration mb-4">
                            <img class="w-100" src="https://d2z9497xp8xb12.cloudfront.net/prod-images/186850c1758093989007issue-type-light.png" alt="No work item types">
                        </div>
                        <h2 class="mb-3">No work item types yet</h2>
                        <p class="text-muted mb-4">Create and customize different types of work items with unique properties</p>
                        <button class="add_button" data-bs-toggle="modal" data-bs-target="#enableWorkItemModal">
                            Enable
                        </button>
                    </div>
                    <div *ngIf="enableWorkitemType" class="work-item-type-enabled-container d-flex flex-column align-items-center justify-content-center w-100">
                        <div class="workitem_Header d-flex align-items-center justify-content-between w-100">
                            <div class="left_side">
                                <div class="p-title">Work Item Types</div>
                                <div class="subtitle">Create and customize different types of work items with unique properties</div>
                            </div>
                            <div class="right_side">
                                <button class="add_button" (click)="addWorkItemType()">
                                    Add Work Item Type
                                </button>
                            </div>
                        </div>
                        <div class="workitem_content w-100">
                            <div class="default_task">
                                <div class="task_header d-flex align-items-center justify-content-between">
                                    <div class="left_side">
                                        <div class="icon"></div>
                                        <div class="text_heading">
                                            <div class="title">Task</div>
                                            <div class="subtitle">Default work item type</div>
                                        </div>
                                    </div>
                                    <div class="right_side d-flex align-items-center gap-2">
                                        <div class="default_text">Default</div>
                                        <div class="three_dots"><i class="fas fa-ellipsis-h" matButton [matMenuTriggerFor]="menu" (click)="$event.stopPropagation()"></i></div>
                                        <mat-menu #menu="matMenu">
                                            <button mat-menu-item>
                                                <div class="delete d-flex align-items-center gap-2"> edit
                                                </div>
                                            </button>
                                            <button mat-menu-item>
                                                <div class="delete d-flex align-items-center gap-2"> delete
                                                </div>
                                            </button>
                                        </mat-menu>
                                    </div>
                                </div>
                                <div class="custom_properties">
                                    <div *ngIf="!openAddPropertySection" class="empty_customPropeties common_style d-flex flex-column align-items-center justify-content-center">
                                        <div class="empty_icon p-2">
                                            <img class="w-100" src="https://d2z9497xp8xb12.cloudfront.net/prod-images/110157c1758030283999mod.svg" alt="">
                                        </div>
                                        <div class="empty_title">Add custom properties</div>
                                        <div class="empty_subtitle">New properties you add for this work item type will show here.</div>
                                        <button class="add_property_btn" (click)="addProperty()">
                                            + Add new property
                                        </button>
                                    </div>
                                    <div class="create_customProperties d-flex flex-column align-items-center" *ngIf="openAddPropertySection">
                                        <div class="custom_title d-flex w-100 justify-content-start">Custom Properties<span class="info-icon">i</span></div>
                                        <div class="properties mb-1 p-0 w-100 h-0 common_style row" *ngFor="let prop of propertyDrafts; let i = index">
                                            <div class="top_section d-flex">
                                                <div class="left_properties_sec p-2 col-6">
                                                    <div>
                                                        <textarea class="textarea-plain" placeholder="Title" rows="1" #titleInput
                                                            [(ngModel)]="prop.title"></textarea>
                                                    </div>
                                                    <div>
                                                        <textarea class="textarea-plain" placeholder="Description" rows="5"
                                                            [(ngModel)]="prop.description"></textarea>
                                                    </div>
                                                </div>
                                                <div class="right_properties_sec p-2 col-6">
                                                    <div class="property_type">Property type</div>
                                                    <div class="property_type_select select-with-icon">
                                                        <span class="type-icon">{{ typeIcon(prop.type) }}</span>
                                                        <select class="form-select select-pl"
                                                            [(ngModel)]="prop.type">
                                                            <option [ngValue]="''" disabled>Select type</option>
                                                            <option value="text">Text</option>
                                                            <option value="number">Number</option>
                                                            <option value="dropdown">Dropdown</option>
                                                            <option value="boolean">Boolean</option>
                                                        </select>
                                                    </div>

                                                    <div class="attributes mt-3" *ngIf="prop.type === 'text'">
                                                        <div class="attributes_label">Attributes</div>
                                                        <div class="attributes_group d-flex align-items-center gap-3">
                                                            <div class="form-check form-check-inline">
                                                                <input class="form-check-input" type="radio" [attr.name]="'textAttrInline_'+i" [attr.id]="'textSingleLineInline_'+i" value="single" [(ngModel)]="prop['textMode']">
                                                                <label class="form-check-label" [attr.for]="'textSingleLineInline_'+i">Single line</label>
                                                            </div>
                                                            <div class="form-check form-check-inline">
                                                                <input class="form-check-input" type="radio" [attr.name]="'textAttrInline_'+i" [attr.id]="'textParagraphInline_'+i" value="paragraph" [(ngModel)]="prop['textMode']">
                                                                <label class="form-check-label" [attr.for]="'textParagraphInline_'+i">Paragraph</label>
                                                            </div>
                                                            <div class="form-check form-check-inline">
                                                                <input class="form-check-input" type="radio" [attr.name]="'textAttrInline_'+i" [attr.id]="'textReadonlyInline_'+i" value="readonly" [(ngModel)]="prop['textMode']">
                                                                <label class="form-check-label" [attr.for]="'textReadonlyInline_'+i">Read only</label>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <div class="mt-3" *ngIf="prop.type === 'number'">
                                                        <div class="default_label">Default <span class="optional">(Optional)</span></div>
                                                        <input type="number" class="form-control" placeholder="Add number" [(ngModel)]="prop.numberDefault">
                                                    </div>

                                                    <div class="mt-3" *ngIf="prop.type === 'dropdown'">
                                                        <div class="attributes_label">Attributes</div>
                                                        <div class="attributes_group d-flex align-items-center gap-3">
                                                            <div class="form-check form-check-inline">
                                                                <input class="form-check-input" type="radio" [attr.name]="'ddAttrInline_'+i" [attr.id]="'ddSingleInline_'+i" [value]="false" [(ngModel)]="prop.dropdownMulti">
                                                                <label class="form-check-label" [attr.for]="'ddSingleInline_'+i">Single select</label>
                                                            </div>
                                                            <div class="form-check form-check-inline">
                                                                <input class="form-check-input" type="radio" [attr.name]="'ddAttrInline_'+i" [attr.id]="'ddMultiInline_'+i" [value]="true" [(ngModel)]="prop.dropdownMulti">
                                                                <label class="form-check-label" [attr.for]="'ddMultiInline_'+i">Multi select</label>
                                                            </div>
                                                        </div>
                                                        <div class="options_label mt-2">Options</div>
                                                        <div class="option-input-wrap" *ngFor="let opt of prop.dropdownOptions; let j = index">
                                                            <span class="drag-icon"></span>
                                                            <input class="form-control option-input" [placeholder]="'Add option'" [(ngModel)]="prop.dropdownOptions[j]">
                                                            <button type="button" class="btn btn-sm btn-link text-danger" (click)="removeDraftOption(i, j)">Remove</button>
                                                        </div>
                                                        <button type="button" class="btn btn-sm btn-outline-primary mt-1" (click)="addDraftOption(i)">+ Add option</button>
                                                        <div class="default_label mt-2">Default <span class="optional">(Optional)</span></div>
                                                        <select class="form-select" [(ngModel)]="prop.dropdownDefault">
                                                            <option [ngValue]="null">Select option</option>
                                                            <option *ngFor="let opt of prop.dropdownOptions" [ngValue]="opt" [disabled]="!opt || !opt.trim()">{{ opt || '' }}</option>
                                                        </select>
                                                    </div>
                                                </div>
                                            </div>
                                    
                                            <div class="bottom_section col-12 d-flex justify-content-between align-items-center">
                                                <div class="active_section d-flex align-items-center gap-3">
                                                    <div class="form-check mb-0">
                                                        <input class="form-check-input" type="checkbox" [attr.id]="'mandatoryPropertyInline_'+i"
                                                            [(ngModel)]="prop.mandatory">
                                                        <label class="form-check-label" [attr.for]="'mandatoryPropertyInline_'+i">
                                                            Mandatory property
                                                        </label>
                                                    </div>
                                                    <div class="form-check mb-0">
                                                        <input class="form-check-input" type="checkbox" [attr.id]="'activePropertyInline_'+i"
                                                            [(ngModel)]="prop.active">
                                                        <label class="form-check-label" [attr.for]="'activePropertyInline_'+i">
                                                            Active
                                                        </label>
                                                    </div>
                                                </div>
                                                <div class="create_section d-flex align-items-center gap-1">
                                                    <button type="button" class="btn common_cancel_btn" (click)="removeDraft(i)">Cancel</button>
                                                    <button type="button" class="btn create_btn" (click)="createDraftProperty(i)">Create</button>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="w-100 mt-2">
                                            <button class="add_New_property_btn" (click)="addNewProperty()">
                                                + Add new property
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="modal fade" id="enableWorkItemModal" tabindex="-1" aria-labelledby="enableWorkItemModalLabel" aria-hidden="true">
                    <div class="modal-dialog modal-dialog-centered">
                        <div class="modal-content">
                            <div class="modal-header border-0">
                                <div class="d-flex align-items-center">
                                    <img src="https://d2z9497xp8xb12.cloudfront.net/prod-images/439988c1752592958469delete.svg" class="me-2" alt="">
                                    <h5 class="modal-title mb-0" id="enableWorkItemModalLabel">Once enabled, Work item Types can't be disabled.</h5>
                                </div>
                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                            </div>
                            <div class="modal-body">
                                <p class="text-muted">Plane's Work Item will become the default work item type for this project and will show up with its icon and background in this project. Read the docs.</p>
                            </div>
                            <div class="modal-footer border-0">
                                <button type="button" class="btn common_cancel_btn" data-bs-dismiss="modal">Cancel</button>
                                <button type="button" class="btn enable_btn" (click)="enableWorkitem()" data-bs-dismiss="modal">Enable</button>
                            </div>
                        </div>
                    </div>
                </div>

            </ng-container>
            <ng-container *ngIf="selectedTab == 'TEMPLATES'">
                <div class="main-content">
                    <div class="template-container d-flex flex-column align-items-center justify-content-center w-100">
                        <div class="template-illustration mb-4">
                            <img class="w-100" src="https://d2z9497xp8xb12.cloudfront.net/prod-images/186850c1758093989007issue-type-light.png" alt="No templates">
                        </div>
                        <h2 class="mb-3">No templates yet</h2>
                        <p class="text-muted mb-4">Create and customize templates to streamline your project setup.</p>
                        <button class="add_button" (click)="addTemplate()">
                            Add template
                        </button>
                    </div>
                </div>
            </ng-container>

            <ng-container *ngIf="selectedTab == 'EPIC'">
               <!-- properties.component.html -->
                        <div class="properties-container">
                            <div class="header_section">
                                 <mat-icon fontIcon="keyboard_arrow_down"></mat-icon>
                                <div class="prop_header">
                                    <div class="title">Properties</div>
                                    <div class="desc">Add custom properties of your epic</div>
                                </div>
                            </div>

                            <ng-container *ngIf="customPropertiesList.length >0; else emptyscreen">

                                    <div class="custom-properties-panel">
                                <div class="properties-header">
                                    Custom properties
                                    <mat-icon class="info-icon">info</mat-icon>
                                </div>
                                <div class="property-row" *ngFor="let prop of customPropertiesList;let i = index">
                                    <ng-container *ngIf="!prop.isEdit">
                                           <div class="property-icon-label">
                                    <mat-icon style="font-size: 16px; margin-top: 8px;">{{getProprtyIcons(prop.propertyType.value)}}</mat-icon>
                                    <span class="prop-label">{{prop.title}}</span>
                                    </div>
                                    <div class="property-options">
                                     <span *ngIf="prop?.propertyType?.attributeType !== '' "  class="prop-pill" >{{prop?.propertyType?.attributeType || 'N/A'}}</span>
                                      <span *ngIf="prop?.propertyType?.attributeValue !== '' " class="prop-pill" >{{prop?.propertyType?.attributeValue || 'N/A' }}</span>
                                    </div>
                                    <div class="property-status">
                                            <span
                                                class="status-pill"
                                                [ngClass]="prop.active ? 'active' : 'disabled'">
                                                {{prop.active ? 'Active' : 'Disabled'}}
                                            </span>
                                            </div>
                                    <button (click)="editDialog($event,prop)"  mat-icon-button class="prop-action"><mat-icon>more_vert</mat-icon></button>
                               
                                    </ng-container>
                                    <ng-container *ngIf="prop.isEdit">
                                          <div style="width: -webkit-fill-available;" class="property_box">
                                        <div class="prop_box">
                                            <div class="top_section">
                                            <div class="left_section">
                                                <div class="title_field">
                                                <input
                                                    type="text"
                                                    placeholder="Title"
                                                    style="font-size: 14px; font-weight: 500; border: none; outline: none; width: 100%; background: transparent;"
                                                    [(ngModel)]="prop.title" />
                                                </div>
                                                <div class="desc_field">
                                                <textarea
                                                    placeholder="Description"
                                                    class="form-control description"
                                                    style="font-size: 14px; font-weight: 400; border: none; outline: none; width: 100%; background: transparent; resize: none;"
                                                    [(ngModel)]="prop.description"></textarea>
                                                </div>
                                            </div>
                                            <!-- <div class="divider"></div> -->
                                            <div class="right_section">
                                                <div class="field">
                                                <div style="font-size: 14px; font-weight:400;" >Property type</div>
                                                <mat-form-field appearance="outline" color="accent" class="assignee-field">
                                                    <mat-select
                                                  [disabled]="true"
                                                    style="font-size: 14px;"
                                                    [placeholder]="prop.propertyType.value"
                                                    [(ngModel)]="prop.propertyType.value">
                                                    <mat-option *ngFor="let prop of epicPropertyTypes" [value]="prop.value">
                                                        <div class="option-item">
                                                        <!-- <mat-icon class="option-icon">{{ prop.icon }}</mat-icon> -->
                                                        {{ prop.label }}
                                                        </div>
                                                    </mat-option>
                                                    </mat-select>
                                                </mat-form-field>
                                                </div>
                                                <!-- text -->
                                                <div *ngIf="prop.propertyType.value === 'Text' " class="type_text">
                                                    <div class="type_title">Attributes </div>
                                                    <div class="type-group">
                                                        <mat-radio-group 
                                                        [disabled]="true"
                                                        [(ngModel)]="prop.propertyType.attributeType" class="radio-horizontal">
                                                            <mat-radio-button value="singleline">Single line</mat-radio-button>
                                                            <mat-radio-button value="paragraph">Paragrph</mat-radio-button>
                                                             <mat-radio-button value="readonly">Read only</mat-radio-button>
                                                        </mat-radio-group>
                                                    </div>
                                                 
                                                      <div *ngIf="prop.propertyType.attributeType !== '' " class="field  ">
                                                         <div class="type_title">Read only</div>
                                                        <mat-form-field  appearance="outline" color="accent">
                                                            <input
                                                            [disabled]="true"
                                                             style="font-size: 14px; font-weight: 600;" matInput name="readonly"
                                                                [placeholder]="prop.propertyType.attributeValue" [(ngModel)]="prop.propertyType.attributeValue"
                                                               />
                                                        </mat-form-field>
                                                    </div>
                                                </div>
                                                   <!-- number -->

                                                 <div style="margin-top: 10px;" *ngIf="prop.propertyType.value === 'number'" class="field  ">
                                                         <div style="font-style: italic;" class="type_title">Default(optional)</div>
                                                        <mat-form-field  appearance="outline" color="accent">
                                                            <input  
                                                            [disabled]="true"
                                                             type="number" style="font-size: 14px; font-weight: 600;" matInput name="number"
                                                                placeholder="Add number" [(ngModel)]="prop.propertyType.attributeType"
                                                               />
                                                        </mat-form-field>
                                                    </div>

                                                    <!-- dropdown -->
                                                      <div *ngIf="prop.propertyType.value === 'dropdown' " class="type_text">
                                                    <div class="type_title">Attributes </div>
                                                    <div class="type-group">
                                                        <mat-radio-group [disabled]="true" [(ngModel)]="prop.propertyType.attributeValue" class="radio-horizontal">
                                                            <mat-radio-button value="singleselect">Single select</mat-radio-button>
                                                            <mat-radio-button value="multiselect">Multi select</mat-radio-button>
                                                        </mat-radio-group>
                                                    </div>
                                                    <div class="option_fields">
                                                        <div class="type_title">Options</div>
                                                        <div class="option_field_btn" *ngFor="let option of prop.propertyType.attributeOptions; let i = index; trackBy: trackByIndex">
                                                            <mat-form-field 
                                                       
                                                            appearance="outline" color="accent">
                                                            <input
                                                                 [disabled]="true"
                                                                style="font-size: 14px; font-weight: 600;"
                                                                matInput
                                                                name="option{{i}}"
                                                                placeholder="Add option"
                                                                [(ngModel)]="optionFields[i]"
                                                                (keydown.enter)="addOptionField(i); $event.preventDefault()"
                                                            />
                                                            </mat-form-field>
                                                          
                                                        </div>
                                                        </div>


                                                    <div style="margin-top: 10px;" class="field">
                                                          <div style="font-style: italic;" class="type_title">Default(optional)</div>
                                                        <mat-form-field 
                                                        appearance="outline" color="accent" class="assignee-field">
                                                            <mat-select
                                                               [disabled]="true"
                                                            style="font-size: 14px;"
                                                            [placeholder]="'Select option'"
                                                            [(ngModel)]="prop.propertyType.attributeValue">
                                                            <mat-option *ngFor="let opt of prop.propertyType.attributeOptions" [value]="opt">
                                                                <div class="option-item">{{ opt }}</div>
                                                            </mat-option>
                                                            </mat-select>
                                                        </mat-form-field>
                                                        </div>

                                                </div>
                                                  <!-- member -->
                                                      <div *ngIf="prop.propertyType.value === 'member' " class="type_text">
                                                    <div class="type_title">Attributes </div>
                                                    <div class="type-group">
                                                        <mat-radio-group 
                                                        [disabled]="true"
                                                        [(ngModel)]="prop.propertyType.attributeValue" class="radio-horizontal">
                                                            <mat-radio-button value="singleselect">Single select</mat-radio-button>
                                                            <mat-radio-button value="multiselect">Multi select</mat-radio-button>
                                                        </mat-radio-group>
                                                    </div>
                                                    <div style="margin-top: 10px;" class="field">
                                                          <div style="font-style: italic;" class="type_title">Default(optional)</div>
                                                        <mat-form-field 
                                                    
                                                        appearance="outline" color="accent" class="assignee-field">
                                                            <mat-select
                                                                [disabled]="true"
                                                            style="font-size: 14px;"
                                                            [placeholder]="'Select option'"
                                                            [(ngModel)]="prop.propertyType.attributeValue">
                                                            <mat-option *ngFor="let opt of prop.propertyType.attributeOptions"  [value]="opt">
                                                                <div class="option-item">{{ opt }}</div>
                                                            </mat-option>
                                                            </mat-select>
                                                        </mat-form-field>
                                                        </div>

                                                </div>
                                                
                                            </div>
                                            </div>
                                            <div class="bottom_section">
                                            <div class="checkboxes">
                                                <mat-checkbox [(ngModel)]="prop.mandatory">Mandatory property</mat-checkbox>
                                                <mat-checkbox [(ngModel)]="prop.active">Active</mat-checkbox>
                                            </div>
                                            <div class="actions">
                                                <button class="cancel-btn" (click)="onEditEpicCancel(prop)">Discard</button>
                                                <button class="add-btn" (click)="updateEpicAPI(i,prop)">Update</button>
                                            </div>
                                            </div>
                                        </div>
                                        </div>
                                    </ng-container>

                                  </div>
                                    </div>
                                     <button class="new-btn" (click)="onEpicCreate()">+ Add new property</button>
                            </ng-container>
                            

                                <div *ngIf="customProperties.length>0" class="property_box_list">
                                     <div *ngFor="let property of customProperties; let i = index" class="property_box">
                                        <div class="prop_title">Custom Properties</div>
                                        <div class="prop_box">
                                            <div class="top_section">
                                            <div class="left_section">
                                                <div class="title_field">
                                                <input
                                                    type="text"
                                                    placeholder="Title"
                                                    style="font-size: 14px; font-weight: 500; border: none; outline: none; width: 100%; background: transparent;"
                                                    [(ngModel)]="property.title" />
                                                </div>
                                                <div class="desc_field">
                                                <textarea
                                                    placeholder="Description"
                                                    class="form-control description"
                                                    style="font-size: 14px; font-weight: 400; border: none; outline: none; width: 100%; background: transparent; resize: none;"
                                                    [(ngModel)]="property.description"></textarea>
                                                </div>
                                            </div>
                                            <!-- <div class="divider"></div> -->
                                            <div class="right_section">
                                                <div class="field">
                                                <div style="font-size: 14px; font-weight:400;" >Property type</div>
                                                <mat-form-field appearance="outline" color="accent" class="assignee-field">
                                                    <mat-select
                                                    style="font-size: 14px;"
                                                    [placeholder]="'Select Type'"
                                                    [(ngModel)]="property.type">
                                                    <mat-option *ngFor="let prop of epicPropertyTypes" [value]="prop.value">
                                                        <div class="option-item">
                                                        <mat-icon class="option-icon">{{ prop.icon }}</mat-icon>
                                                        {{ prop.label }}
                                                        </div>
                                                    </mat-option>
                                                    </mat-select>
                                                </mat-form-field>
                                                </div>
                                                <!-- text -->
                                                <div *ngIf="property.type === 'text' " class="type_text">
                                                    <div class="type_title">Attributes </div>
                                                    <div class="type-group">
                                                        <mat-radio-group [(ngModel)]="property.typeOption" class="radio-horizontal">
                                                            <mat-radio-button value="singleline">Single line</mat-radio-button>
                                                            <mat-radio-button value="paragraph">Paragrph</mat-radio-button>
                                                             <mat-radio-button value="readonly">Read only</mat-radio-button>
                                                        </mat-radio-group>
                                                    </div>
                                                 
                                                      <div *ngIf="property.typeOption === 'readonly' " class="field  ">
                                                         <div class="type_title">Read only</div>
                                                        <mat-form-field appearance="outline" color="accent">
                                                            <input style="font-size: 14px; font-weight: 600;" matInput name="readonly"
                                                                placeholder="" [(ngModel)]="property.typeSubOption"
                                                               />
                                                        </mat-form-field>
                                                    </div>
                                                </div>
                                                   <!-- number -->

                                                 <div style="margin-top: 10px;" *ngIf="property.type === 'number'" class="field  ">
                                                         <div style="font-style: italic;" class="type_title">Default(optional)</div>
                                                        <mat-form-field appearance="outline" color="accent">
                                                            <input  type="number" style="font-size: 14px; font-weight: 600;" matInput name="number"
                                                                placeholder="Add number" [(ngModel)]="property.typeOption"
                                                               />
                                                        </mat-form-field>
                                                    </div>

                                                    <!-- dropdown -->
                                                      <div *ngIf="property.type === 'dropdown' " class="type_text">
                                                    <div class="type_title">Attributes </div>
                                                    <div class="type-group">
                                                        <mat-radio-group [(ngModel)]="property.typeOption" class="radio-horizontal">
                                                            <mat-radio-button value="singleselect">Single select</mat-radio-button>
                                                            <mat-radio-button value="multiselect">Multi select</mat-radio-button>
                                                        </mat-radio-group>
                                                    </div>
                                                    <div class="option_fields">
                                                        <div class="type_title">Options</div>
                                                        <div class="option_field_btn" *ngFor="let option of optionFields; let i = index; trackBy: trackByIndex">
                                                            <mat-form-field appearance="outline" color="accent">
                                                            <input
                                                                style="font-size: 14px; font-weight: 600;"
                                                                matInput
                                                                name="option{{i}}"
                                                                placeholder="Add option"
                                                                [(ngModel)]="optionFields[i]"
                                                                (keydown.enter)="addOptionField(i); $event.preventDefault()"
                                                            />
                                                            </mat-form-field>
                                                          
                                                        </div>
                                                        </div>


                                                    <div style="margin-top: 10px;" class="field">
                                                          <div style="font-style: italic;" class="type_title">Default(optional)</div>
                                                        <mat-form-field appearance="outline" color="accent" class="assignee-field">
                                                            <mat-select
                                                            style="font-size: 14px;"
                                                            [placeholder]="'Select option'"
                                                            [(ngModel)]="property.typeSubOption">
                                                            <mat-option *ngFor="let opt of optionFields" [value]="opt">
                                                                <div class="option-item">{{ opt }}</div>
                                                            </mat-option>
                                                            </mat-select>
                                                        </mat-form-field>
                                                        </div>

                                                </div>
                                                  <!-- member -->
                                                      <div *ngIf="property.type === 'member' " class="type_text">
                                                    <div class="type_title">Attributes </div>
                                                    <div class="type-group">
                                                        <mat-radio-group [(ngModel)]="property.typeOption" class="radio-horizontal">
                                                            <mat-radio-button value="singleselect">Single select</mat-radio-button>
                                                            <mat-radio-button value="multiselect">Multi select</mat-radio-button>
                                                        </mat-radio-group>
                                                    </div>
                                                    <div style="margin-top: 10px;" class="field">
                                                          <div style="font-style: italic;" class="type_title">Default(optional)</div>
                                                        <mat-form-field appearance="outline" color="accent" class="assignee-field">
                                                            <mat-select
                                                            style="font-size: 14px;"
                                                            [placeholder]="'Select option'"
                                                            [(ngModel)]="property.typeSubOption">
                                                            <mat-option *ngFor="let opt of optionFields" [value]="opt">
                                                                <div class="option-item">{{ opt }}</div>
                                                            </mat-option>
                                                            </mat-select>
                                                        </mat-form-field>
                                                        </div>

                                                </div>
                                                
                                            </div>
                                            </div>
                                            <div class="bottom_section">
                                            <div class="checkboxes">
                                                <mat-checkbox [(ngModel)]="property.mandatory">Mandatory property</mat-checkbox>
                                                <mat-checkbox [(ngModel)]="property.active">Active</mat-checkbox>
                                            </div>
                                            <div class="actions">
                                                <button class="cancel-btn" (click)="onEpicCancel(i)">Cancel</button>
                                                <button class="add-btn" (click)="createEpicAPI(i,property)">Create</button>
                                            </div>
                                            </div>
                                        </div>
                                        </div>
                                        <button class="new-btn" (click)="onEpicCreate()">+ Add new property</button>
                                </div>

                                <ng-template #emptyscreen>
                                    <div class="right_empty_screen">
                                    <div class="empty_content text-center">
                                        <img src="https://d2z9497xp8xb12.cloudfront.net/prod-images/577291c1756901051328issue-detail-light.webp" alt="">
                                    <div style="font-size: 16px; font-weight: 600;">Add custom properties</div>
                                      <div style="font-size: 14px; font-weight: 400;">New properties you add for this work item type will show here.</div>
                                       <button class="new-btn" (click)="onEpicCreate()">+ Add new property</button>
                                    </div>
                                    </div>
                                    </ng-template>

                            
                       
                        </div>


            </ng-container>
<ng-template #emptyScreen>
    <div class="empty-state d-flex flex-column align-items-center justify-content-center">
        <p>No labels available</p>
    </div>
</ng-template>